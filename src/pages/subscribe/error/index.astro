---
import BaseHead from "../../../components/BaseHead.astro";
import Header from "../../../components/Header.astro";
import Footer from "../../../components/Footer.astro";

const reason = Astro.url.searchParams.get("reason") ?? "unknown";
const message =
  reason === "invalid_email" ? "That email doesn’t look valid." :
  reason === "already_subscribed" ? "You’re already subscribed." :
  reason === "api" ? "The email service rejected the request. Try again in a moment." :
  "Something went wrong. Please try again.";
---

<!doctype html>
<html lang="en">
  <head>
    <BaseHead title="Subscription problem" description="There was a problem subscribing." />
  </head>

  <body class="bg-white text-neutral-900 antialiased">
    <Header />

    <main class="mx-auto w-full max-w-2xl px-4 py-16 sm:px-6 lg:px-8">
      <h1 class="text-3xl font-bold tracking-tight">Couldn’t subscribe</h1>
      <p class="mt-4 text-neutral-600">{message}</p>

      <div class="mt-8 flex gap-4">
        <a href="/" class="text-sm font-semibold text-neutral-900 underline">Back to home</a>
        <a href="/subscribe" class="text-sm font-semibold text-neutral-900 underline">Try again</a>
      </div>
    </main>

    <Footer />
  </body>
</html>
