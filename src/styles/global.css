@import "tailwindcss";

/* ==========================================================================
   EVERY LAYOUT - Design Tokens & Primitives
   @see https://every-layout.dev/
   ========================================================================== */

:root {
	/* Modular Scale - Space (using a ratio of ~1.5) */
	--space-3xs: clamp(0.25rem, 0.23rem + 0.11vw, 0.31rem);
	--space-2xs: clamp(0.5rem, 0.48rem + 0.11vw, 0.56rem);
	--space-xs: clamp(0.75rem, 0.71rem + 0.22vw, 0.88rem);
	--space-s: clamp(1rem, 0.95rem + 0.22vw, 1.13rem);
	--space-m: clamp(1.5rem, 1.43rem + 0.33vw, 1.69rem);
	--space-l: clamp(2rem, 1.9rem + 0.43vw, 2.25rem);
	--space-xl: clamp(3rem, 2.87rem + 0.65vw, 3.38rem);
	--space-2xl: clamp(4rem, 3.8rem + 0.87vw, 4.5rem);
	--space-3xl: clamp(6rem, 5.74rem + 1.3vw, 6.75rem);

	/* One-up pairs (for larger jumps) */
	--space-s-m: clamp(1rem, 0.76rem + 1.09vw, 1.69rem);
	--space-m-l: clamp(1.5rem, 1.15rem + 1.52vw, 2.25rem);
	--space-l-xl: clamp(2rem, 1.52rem + 2.17vw, 3.38rem);

	/* Typography Scale - Fluid type using clamp() */
	--step--2: clamp(0.69rem, 0.66rem + 0.18vw, 0.8rem);
	--step--1: clamp(0.83rem, 0.78rem + 0.25vw, 1rem);
	--step-0: clamp(1rem, 0.93rem + 0.33vw, 1.25rem);
	--step-1: clamp(1.2rem, 1.1rem + 0.43vw, 1.56rem);
	--step-2: clamp(1.44rem, 1.31rem + 0.57vw, 1.95rem);
	--step-3: clamp(1.73rem, 1.56rem + 0.76vw, 2.44rem);
	--step-4: clamp(2.07rem, 1.85rem + 1vw, 3.05rem);
	--step-5: clamp(2.49rem, 2.19rem + 1.3vw, 3.82rem);

	/* Measure - Optimal line length for readability */
	--measure: 65ch;
	--measure-narrow: 45ch;
	--measure-wide: 80ch;

	/* Colors - Semantic tokens */
	--color-light: #fff;
	--color-dark: #171717;
	--color-text: #262626;
	--color-text-muted: #737373;
	--color-border: #e5e5e5;
	--color-bg: #fff;
	--color-bg-subtle: #fafafa;
	--color-accent: #2563eb;

	/* Legacy variables for existing components */
	--black: 23, 23, 23;
	--gray: 115, 115, 115;
	--gray-light: 240, 240, 240;
	--accent: 59, 130, 246;
	--box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
}

/* ==========================================================================
   BASE STYLES
   ========================================================================== */

/* Fonts */
@font-face {
	font-family: "Atkinson";
	src: url("/fonts/atkinson-regular.woff") format("woff");
	font-weight: 400;
	font-style: normal;
	font-display: swap;
}

@font-face {
	font-family: "Atkinson";
	src: url("/fonts/atkinson-bold.woff") format("woff");
	font-weight: 700;
	font-style: normal;
	font-display: swap;
}

/* Box sizing */
*,
*::before,
*::after {
	box-sizing: border-box;
}

/* Remove default margin */
body,
h1,
h2,
h3,
h4,
h5,
h6,
p,
figure,
blockquote,
dl,
dd {
	margin: 0;
}

/* Body defaults */
body {
	font-family: "Atkinson", ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
	font-size: var(--step-0);
	line-height: 1.6;
	color: var(--color-text);
	background-color: var(--color-bg);
	min-block-size: 100vh;
	text-rendering: optimizeSpeed;
}

/* ==========================================================================
   FLOW UTILITY - Low-specificity vertical rhythm
   Using :where() for easy overriding
   ========================================================================== */

.flow > :where(* + *) {
	margin-block-start: var(--flow-space, 1em);
}

/* Prose flow - for article content */
.prose > :where(* + *) {
	margin-block-start: var(--flow-space, 1em);
}

.prose :where(h1, h2, h3, h4) {
	--flow-space: var(--space-l);
	line-height: 1.2;
}

.prose :where(h1 + *, h2 + *, h3 + *, h4 + *) {
	--flow-space: var(--space-s);
}

/* ==========================================================================
   TYPOGRAPHY
   ========================================================================== */

h1, .h1 {
	font-size: var(--step-4);
	line-height: 1.1;
	font-weight: 700;
}

h2, .h2 {
	font-size: var(--step-3);
	line-height: 1.2;
	font-weight: 700;
}

h3, .h3 {
	font-size: var(--step-2);
	line-height: 1.3;
	font-weight: 600;
}

h4, .h4 {
	font-size: var(--step-1);
	line-height: 1.4;
	font-weight: 600;
}

small, .text-small {
	font-size: var(--step--1);
}

.text-muted {
	color: var(--color-text-muted);
}

/* ==========================================================================
   CONTENT ELEMENTS
   ========================================================================== */

strong, b {
	font-weight: 700;
}

a {
	color: var(--color-accent);
	text-decoration-thickness: 1px;
	text-underline-offset: 0.15em;
}

a:hover {
	text-decoration-thickness: 2px;
}

img,
picture,
video,
canvas,
svg {
	display: block;
	max-inline-size: 100%;
	block-size: auto;
}

img {
	border-radius: var(--space-2xs);
}

/* Code */
code {
	padding-inline: var(--space-3xs);
	padding-block: 0.125rem;
	border-radius: 0.25rem;
	background: var(--color-bg-subtle);
	font-size: 0.9em;
}

pre {
	padding: var(--space-m);
	border-radius: var(--space-2xs);
	overflow-x: auto;
	background: var(--color-dark);
	color: var(--color-light);
}

pre > code {
	all: unset;
}

/* Blockquote */
blockquote {
	border-inline-start: 4px solid var(--color-border);
	padding-inline-start: var(--space-m);
	font-style: italic;
}

/* Horizontal rule */
hr {
	border: none;
	border-block-start: 1px solid var(--color-border);
	margin-block: var(--space-l);
}

/* Lists */
ul,
ol {
	padding-inline-start: var(--space-m);
}

li + li {
	margin-block-start: var(--space-2xs);
}

/* ==========================================================================
   UTILITIES
   ========================================================================== */

/* Accessibility */
.sr-only {
	border: 0;
	padding: 0;
	margin: 0;
	position: absolute !important;
	block-size: 1px;
	inline-size: 1px;
	overflow: hidden;
	clip: rect(1px, 1px, 1px, 1px);
	clip-path: inset(50%);
	white-space: nowrap;
}

/* Region - vertical padding for sections */
.region {
	padding-block: var(--region-space, var(--space-l-xl));
}

/* Wrapper - max-width container with gutters */
.wrapper {
	max-inline-size: var(--wrapper-max, 75rem);
	margin-inline: auto;
	padding-inline: var(--gutter, var(--space-m));
}

/* Card styling utility */
.card {
	padding: var(--space-m);
	border: 1px solid var(--color-border);
	border-radius: var(--space-xs);
	background: var(--color-bg);
	transition: border-color 0.15s ease, box-shadow 0.15s ease;
}

.card:hover {
	border-color: var(--color-text-muted);
	box-shadow: var(--box-shadow);
}

/* Full bleed - break out of container */
.full-bleed {
	inline-size: 100vw;
	margin-inline-start: 50%;
	transform: translateX(-50%);
}
